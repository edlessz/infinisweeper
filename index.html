<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infinisweeper</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet" />
    <link href="./style.css?v=1.3.1" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="./img/flag_icon.png">
    <meta name="description" content="Infinite, never-ending Minesweeper. Good luck." />
</head>

<body>
    <div id="GUI">
        <div GAME_STATE="title">
            <div id="changelogContainer" class="desktopOnly">
                <div id="changelog">
                    <h2>How to Play</h2>
                    <ul>
                        <li>Left click or tap to dig.</li>
                        <li>Right click, press & hold, or shift + click to place a flag.</li>
                        <li>The number on a tile represents how many mines are adjacent to the tile.</li>
                        <li>Place flags to keep track of where the mines are.</li>
                        <li>Every tile without a mine dug up is worth one point.</li>
                        <li>Correctly placed flags are worth bonus points.</li>
                        <li>Don't dig up a mine, or else it's game over!</li>
                        <li>Compete with friends to see who can get the most points.</li>
                        <li>Rush Mode: You have 5 seconds to dig up a tile. If you use all 5 seconds, you lose.</li>
                    </ul>
                    <hr>
                    <h2>Changelog</h2>
                    <span>v1.4.1</span>
                    <ul>
                        <li>Added loading indicator to continue button</li>
                        <li>Fixed bug where you can continue a game after you lost. No more cheating Mr. Graf!</li>
                        <li>Fixed bug where sometimes high scores won't sort correctly</li>
                        <li>Fixed bug where some high score names don't load</li>
                        <li>Fixed bug where rush mode goes insane</li>
                    </ul>
                    <span>v1.4</span>
                    <ul>
                        <li>Added global score board</li>
                        <li>Added rush mode</li>
                        <li>Added loss text</li>
                        <li>George's scroll wheel now controls zoom level</li>
                        <li>Fixed bug where lose screen would overlap with score data</li>
                        <li>Fixed bug where you can still move and dig briefly after you lost</li>
                    </ul>
                    <span>v1.3.1</span>
                    <ul>
                        <li>Zoom level now saves with saved games</li>
                        <li>Separated Play Again, Main Menu buttons</li>
                        <li>Continue Game no longer starts a new game if there is no game saved</li>
                        <li>Bomb explosions now emit particles in full circle radius instead of just the outside</li>
                        <li>Fixed bug where removing flag on touchscreen sometimes registers as a dig</li>
                        <li>Fixed bug where dragging screen to move was too sensitive</li>
                        <li>Fixed bug where zooming does not zoom in to the correct position</li>
                    </ul>
                    <span>v1.3</span>
                    <ul>
                        <li>Now can place flags using shift + click or ctrl + click. Hooray for mac users and orchestra
                            teachers everywhere!</li>
                        <li>Added "How to Play" section</li>
                        <li>Added zoom in/out buttons</li>
                    </ul>
                    <span>v1.2</span>
                    <ul>
                        <li>Added social buttons</li>
                        <li>Added play again button</li>
                    </ul>
                    <span>Hotfix v1.1.1</span>
                    <ul>
                        <li>Fixed scrolling slow-down glitch on mobile</li>
                    </ul>
                    <span>v1.1</span>
                    <ul>
                        <li>Mobile support</li>
                        <li>Sound effects added</li>
                        <li>Changelog added</li>
                        <li>Bomb & Dialog animations</li>
                        <li>Bomb particles slow down reduction</li>
                        <li>Fixed bomb particle vanish bug</li>
                        <li>Fixed graphical "white grid" bug</li>
                    </ul>
                    <span>Initial Release</span>
                    <ul>
                        <li>
                            Concept & Programming by
                            <a href="https://edwardscamera.com">edwardscamera</a>
                        </li>
                        <li>
                            "Infinisweeper" name and "You've been sweeped!"
                            phrase created by heidrekursson
                        </li>
                        <li>
                            Loss text by swag
                        </li>
                        <li>
                            Art design, flag art and sound effects from Google
                            Minesweeper
                        </li>
                    </ul>
                </div>
            </div>
            <div class="guiContainer" id="titleMenu">
                <h1>Infinisweeper<img class="desktopOnly" src="./img/flag_icon.png"></h1>
                <div style="margin-bottom: 50%;"><span id="versionCalc"></span> | built by <a
                        href="https://edwardscamera.com">edwardscamera</a>
                </div>
                <button style="margin-bottom: 5px" onclick="newGame('normal')"> New Game</button><br />
                <button style="margin-bottom: 5px" onclick="loadGame(this)" id="continueGame">Continue</button><br />
                <button style="margin-bottom: 5px" onclick="newGame('rush')">Rush Mode</button><br />
                <button onclick="switchState('scores')">High Scores</button><br /><br />
            </div>
            <div id="login">
                <button id="signinbtn">Sign In</button>
                <div id="displaynamelabel" style="padding-bottom: 10px;">Signed in as: <b id="displayname"></b>
                </div>
                <button id="signoutbtn" style="float: right;">Sign Out</button>
            </div>
        </div>
        <div GAME_STATE="game">
            <div class="scoreContainer">
                <div class="desktopOnly" style="text-align: center">
                    <button onclick="zoom(16)">Zoom in</button><br />
                    <button onclick="zoom(-16)">Zoom out</button>
                </div>
                <hr class="desktopOnly">
                <div style="display: inline-block; flex: 1;">
                    <div style="color: #f00;">Time Left: <span id="rushLabel">5</span></div>
                    <div>Flags: <span id="flagsLabel">0</span></div>
                    <div>Score: <span id="scoreLabel">0</span></div>
                    <div>High Score: <span id="highScoreLabel">0</span></div>
                </div>
                <div class="mobileOnly" style="text-align: center; flex: 1;">
                    <button onclick="zoom(16)">+</button><br />
                    <button onclick="zoom(-16)">-</button>
                </div>
            </div>
            <div id="lossScreen" class="guiContainer">
                <h1 style="margin-bottom: 5px;">You've been sweeped!</h1>
                <div style="margin-bottom: 15px;" id="lossScreenFlavortext"></div>
                <div id="pointCount"></div>
                <button id="onlineBtn" style="margin: 5px 0px">Sign In</button><br />
                <button style="margin-bottom: 5px" onclick="newGame(GAME_MODE)">Play Again</button><br />
                <button style="margin-bottom: 15px" onclick="switchState('title')">Main Menu</button><br />
                <img onclick="share('copy')" src="https://img.icons8.com/material-outlined/344/copy.png">
                <img onclick="share('twitter')" src="https://abs.twimg.com/favicons/twitter.2.ico">
                <img onclick="share('facebook')" src="https://static.xx.fbcdn.net/rsrc.php/yb/r/hLRJ1GG_y0J.ico">
            </div>
        </div>
        <div GAME_STATE="scores">
            <div id="scorepage">
                <div class="container" id="globalScores"></div><br />
                <button onclick="switchState('title')">Main Menu</button>
            </div>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="./firebase_config.js"></script>
    <script src="./lib.js?v=1.3.1"></script>
    <script src="./game.js?v=1.3.1"></script>
    <!-- Default Statcounter code for Infinisweeper
    https://edwardscamera.com/infinisweeper -->
    <script type="text/javascript">
        var sc_project = 12750108;
        var sc_invisible = 1;
        var sc_security = "601a502d"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <!-- End of Statcounter Code -->
</body>

</html>